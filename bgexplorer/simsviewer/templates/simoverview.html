{% extends "base.html" %}

{% block title %}Simulations Overview{% endblock %}

{% block pageheader %}
    <h1> Simulation Database </h1>
{% endblock %}

{% block mystyles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='js/DataTables/datatables.min.css') }}"> 
    <style>
     .modelname {color:blue}
     
     th {border:1px solid black}
     table.dataTable tbody td {white-space: nowrap; padding: 4px 4px}
     table tbody tr.assembly {background-color:#f5f5f5}
     tr.assembly td:nth-child(2)::after {content:"â†´"; padding-left:0.15em; color:green;}
     .truncate {overflow:hidden; text-overflow:ellipsis; max-width:32ch;}
     .truncate:hover {white-space: normal}
      
     div.dt-buttons { float:left;}
     div.dt-buttons a.btn {font-size:small}
     /*#simdata_filter { display:inline-block; float:right}*/
     #simdata_wrapper {font-size:smaller}
    </style>
{% endblock %}


{% block myscripts %}
    <script type="text/javascript" 
	    src="{{ url_for('static', filename='js/DataTables/datatables.min.js') }}">
    </script>
    <script type="text/javascript">
     $(document).ready(function(){
	 var table = $('#simdata').DataTable({
	     paging: false,
             ordering: true,
             scrollY: $(window).height() - $("#pagecontent").offset().top - 95,
             scrollX: true,
             scrollCollapse: true,
	     dom: 'flrtip',
             //dom: 'B<"clear">lfrtip',
	     //buttons: [ 'colvis', 'colvisRestore', 'copy', 'csv', 
             //           {
             //               extend: 'excel',
             //           } ],
         });
     });
	 
    </script>
{% endblock %}


{% block pagecontent %}
    {% if query %}
	<div id="query" > Showing results for query  "{{ query }}"</div>
    {% endif %}
    {% if sims %}
	{% if not colnames %}
	{% set colnames = sims[0].keys() | reject("equalto","id") | list %}
	{% endif %}
	<table id="simdata"  class="table table-condensed table-bordered" width="100%">
	    <thead>
		<tr><th></th>
		    {% for col in colnames %}
		    <th>{{ col }}</th>
		    {% endfor %}
		</tr>
	    </thead>
	    <tbody>{% for row in sims %}
		<tr>
		    <td>{% if row.id is defined %}
			<a href="{{ url_for('.detailview',dataset=row.id) }}">
			    <span class="glyphicon glyphicon-zoom-in" ></span></a>
			{% endif %}
		    </td>
		    {% for col in colnames %}
		    <td>{{ row.get(col,'') }}</td>
		{% endfor %}</tr>
	    {% endfor %}</tbody>
	</table>
    {% else %}
    <span class="error" >No simulation data found</span>
    {% endif %}
{% endblock %}
